2025-03-20 00:27:35.499 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:27:35.536 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:27:35.536 +05:00 [INF] Hosting environment: Development
2025-03-20 00:27:35.536 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:27:59.643 +05:00 [INF] Application is shutting down...
2025-03-20 00:28:02.517 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:28:02.551 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:28:02.552 +05:00 [INF] Hosting environment: Development
2025-03-20 00:28:02.552 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:28:48.801 +05:00 [INF] Application is shutting down...
2025-03-20 00:28:55.316 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:28:55.345 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:28:55.345 +05:00 [INF] Hosting environment: Development
2025-03-20 00:28:55.345 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:29:41.630 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:29:41.659 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:29:41.660 +05:00 [INF] Hosting environment: Development
2025-03-20 00:29:41.660 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:29:46.715 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:29:46.742 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:29:46.742 +05:00 [INF] Hosting environment: Development
2025-03-20 00:29:46.743 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:30:02.295 +05:00 [INF] Application is shutting down...
2025-03-20 00:31:54.715 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:31:54.753 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:31:54.753 +05:00 [INF] Hosting environment: Development
2025-03-20 00:31:54.753 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:32:26.530 +05:00 [INF] Application is shutting down...
2025-03-20 00:32:30.997 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:32:31.026 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:32:31.027 +05:00 [INF] Hosting environment: Development
2025-03-20 00:32:31.027 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:32:39.132 +05:00 [INF] Application is shutting down...
2025-03-20 00:36:25.993 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:36:26.023 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:36:26.023 +05:00 [INF] Hosting environment: Development
2025-03-20 00:36:26.023 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:37:07.093 +05:00 [INF] Application is shutting down...
2025-03-20 00:37:10.893 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:37:10.928 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:37:10.929 +05:00 [INF] Hosting environment: Development
2025-03-20 00:37:10.930 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:37:21.999 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-03-20 00:37:22.018 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:37:22.032 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 35.0975ms
2025-03-20 00:37:22.047 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-03-20 00:37:24.150 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 00:37:24.204 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 54.4316ms
2025-03-20 00:37:24.297 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 00:37:24.301 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 3.8924ms
2025-03-20 00:37:24.580 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 00:37:24.649 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.1599ms
2025-03-20 00:39:49.596 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=win95.exe.file&count=5 - null 0
2025-03-20 00:39:49.604 +05:00 [INF] CORS policy execution failed.
2025-03-20 00:39:49.606 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 00:39:49.613 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:39:49.636 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:39:49.654 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 00:39:49.706 +05:00 [INF] Начало выполнения команды для Domain=win95.exe.file, Count=5
2025-03-20 00:39:49.711 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:39:49.712 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:39:50.168 +05:00 [INF] Received HTTP response headers after 452.9764ms - 200
2025-03-20 00:39:50.170 +05:00 [INF] End processing HTTP request after 460.0376ms - 200
2025-03-20 00:39:50.276 +05:00 [INF] Начало подсчета букв...
2025-03-20 00:39:50.277 +05:00 [INF] Подсчет завершился успешно. Было обработано 668 букв.
2025-03-20 00:39:50.278 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 00:39:51.371 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1712.4773ms.
2025-03-20 00:39:51.379 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 00:39:51.394 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1752.6369ms
2025-03-20 00:39:51.395 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:39:51.410 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=win95.exe.file&count=5 - 200 null application/json; charset=utf-8 1814.2169ms
2025-03-20 00:40:38.550 +05:00 [INF] Application is shutting down...
2025-03-20 00:40:42.141 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:40:42.182 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:40:42.183 +05:00 [INF] Hosting environment: Development
2025-03-20 00:40:42.184 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:41:14.653 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null 0
2025-03-20 00:41:14.672 +05:00 [INF] CORS policy execution failed.
2025-03-20 00:41:14.673 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 00:41:14.674 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:41:14.688 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:41:14.702 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:41:14.718 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 00:41:14.769 +05:00 [INF] Начало выполнения команды для Domain=te_ekb, Count=5
2025-03-20 00:41:14.774 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:41:14.775 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:41:15.227 +05:00 [INF] Received HTTP response headers after 449.0446ms - 200
2025-03-20 00:41:15.236 +05:00 [INF] End processing HTTP request after 463.2689ms - 200
2025-03-20 00:41:15.247 +05:00 [INF] Начало подсчета букв...
2025-03-20 00:41:15.248 +05:00 [INF] Подсчет завершился успешно. Было обработано 1154 букв.
2025-03-20 00:41:15.249 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 00:41:16.173 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1450.6692ms.
2025-03-20 00:41:16.181 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 00:41:16.197 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1490.1223ms
2025-03-20 00:41:16.198 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:41:16.214 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null application/json; charset=utf-8 1562.8881ms
2025-03-20 00:46:52.611 +05:00 [INF] Application is shutting down...
2025-03-20 00:46:56.144 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:46:56.207 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:46:56.209 +05:00 [INF] Hosting environment: Development
2025-03-20 00:46:56.211 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:47:14.177 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null 0
2025-03-20 00:47:14.196 +05:00 [INF] CORS policy execution failed.
2025-03-20 00:47:14.196 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 00:47:14.198 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:47:14.212 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:47:14.226 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:47:14.242 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 00:47:14.290 +05:00 [INF] Начало выполнения команды для Domain=te_ekb, Count=5
2025-03-20 00:47:14.295 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:47:14.296 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:47:14.638 +05:00 [INF] Received HTTP response headers after 339.0197ms - 200
2025-03-20 00:47:14.646 +05:00 [INF] End processing HTTP request after 352.9142ms - 200
2025-03-20 00:47:14.657 +05:00 [INF] Начало подсчета букв...
2025-03-20 00:47:14.659 +05:00 [INF] Подсчет завершился успешно. Было обработано 937 букв.
2025-03-20 00:47:14.660 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 00:47:15.596 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1349.6264ms.
2025-03-20 00:47:15.602 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 00:47:15.618 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1388.4036ms
2025-03-20 00:47:15.619 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:47:15.633 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null application/json; charset=utf-8 1457.6226ms
2025-03-20 00:52:10.555 +05:00 [INF] Application is shutting down...
2025-03-20 00:52:14.899 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:52:14.939 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:52:14.940 +05:00 [INF] Hosting environment: Development
2025-03-20 00:52:14.940 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:52:20.762 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null 0
2025-03-20 00:52:20.779 +05:00 [INF] CORS policy execution failed.
2025-03-20 00:52:20.780 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 00:52:20.781 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:52:20.795 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:52:20.809 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:52:20.825 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 00:52:20.876 +05:00 [INF] Начало выполнения команды для Domain=te_ekb, Count=5
2025-03-20 00:52:20.880 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:52:20.881 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:52:21.321 +05:00 [INF] Received HTTP response headers after 437.2183ms - 200
2025-03-20 00:52:21.329 +05:00 [INF] End processing HTTP request after 450.1751ms - 200
2025-03-20 00:52:21.344 +05:00 [INF] Начало подсчета букв...
2025-03-20 00:52:21.344 +05:00 [INF] Подсчет завершился успешно. Было обработано 937 букв.
2025-03-20 00:52:21.345 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 00:52:22.273 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1442.9367ms.
2025-03-20 00:52:22.280 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 00:52:22.299 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1484.6863ms
2025-03-20 00:52:22.301 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:52:22.318 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null application/json; charset=utf-8 1557.1109ms
2025-03-20 00:52:41.955 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null null
2025-03-20 00:52:41.961 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:52:41.965 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:52:41.968 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:52:41.970 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:52:41.970 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:52:42.102 +05:00 [INF] Received HTTP response headers after 130.8152ms - 200
2025-03-20 00:52:42.103 +05:00 [INF] End processing HTTP request after 133.1869ms - 200
2025-03-20 00:52:42.138 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 170.0536ms.
2025-03-20 00:52:42.140 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:52:42.141 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 174.3329ms
2025-03-20 00:52:42.143 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:52:42.144 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null text/plain; charset=utf-8 189.8185ms
2025-03-20 00:53:27.431 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null null
2025-03-20 00:53:27.435 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:53:27.436 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:53:27.438 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:53:27.440 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:53:27.440 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:53:27.547 +05:00 [INF] Received HTTP response headers after 105.941ms - 200
2025-03-20 00:53:27.549 +05:00 [INF] End processing HTTP request after 108.9997ms - 200
2025-03-20 00:53:27.584 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 145.0765ms.
2025-03-20 00:53:27.586 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:53:27.587 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 149.6645ms
2025-03-20 00:53:27.589 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:53:27.590 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null text/plain; charset=utf-8 158.9132ms
2025-03-20 00:53:48.133 +05:00 [INF] Application is shutting down...
2025-03-20 00:53:51.819 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:53:51.862 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:53:51.863 +05:00 [INF] Hosting environment: Development
2025-03-20 00:53:51.863 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:53:54.035 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null null
2025-03-20 00:53:54.058 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:53:54.072 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:53:54.087 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:53:54.103 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:53:54.115 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:53:54.116 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:53:54.558 +05:00 [INF] Received HTTP response headers after 438.6491ms - 200
2025-03-20 00:53:54.565 +05:00 [INF] End processing HTTP request after 451.1808ms - 200
2025-03-20 00:53:54.580 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 471.9436ms.
2025-03-20 00:53:54.587 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:53:54.594 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 502.0463ms
2025-03-20 00:53:54.595 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:53:54.599 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null text/plain; charset=utf-8 565.9824ms
2025-03-20 00:54:21.062 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=6 - null null
2025-03-20 00:54:21.066 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:21.067 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:54:21.069 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:54:21.070 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:21.071 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:21.204 +05:00 [INF] Received HTTP response headers after 132.1643ms - 200
2025-03-20 00:54:21.206 +05:00 [INF] End processing HTTP request after 136.0167ms - 200
2025-03-20 00:54:21.238 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 168.7048ms.
2025-03-20 00:54:21.240 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:54:21.241 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 173.3397ms
2025-03-20 00:54:21.242 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:21.244 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=6 - 200 null text/plain; charset=utf-8 182.1404ms
2025-03-20 00:54:24.005 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=1 - null null
2025-03-20 00:54:24.008 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:24.009 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:54:24.010 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:54:24.011 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:24.012 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:24.105 +05:00 [INF] Received HTTP response headers after 92.0315ms - 200
2025-03-20 00:54:24.106 +05:00 [INF] End processing HTTP request after 94.9547ms - 200
2025-03-20 00:54:24.109 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.8473ms.
2025-03-20 00:54:24.110 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:54:24.111 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 101.2667ms
2025-03-20 00:54:24.112 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:24.113 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=1 - 200 null text/plain; charset=utf-8 108.5159ms
2025-03-20 00:54:42.074 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null null
2025-03-20 00:54:42.081 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:42.082 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:54:42.084 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:54:42.085 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:42.087 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:54:42.208 +05:00 [INF] Received HTTP response headers after 118.553ms - 200
2025-03-20 00:54:42.210 +05:00 [INF] End processing HTTP request after 124.6674ms - 200
2025-03-20 00:54:42.245 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 160.1669ms.
2025-03-20 00:54:42.247 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:54:42.249 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 165.291ms
2025-03-20 00:54:42.250 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:54:42.252 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null text/plain; charset=utf-8 177.9384ms
2025-03-20 00:55:14.424 +05:00 [INF] Application is shutting down...
2025-03-20 00:55:17.977 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 00:55:18.018 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 00:55:18.019 +05:00 [INF] Hosting environment: Development
2025-03-20 00:55:18.019 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 00:55:21.444 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null 0
2025-03-20 00:55:21.461 +05:00 [INF] CORS policy execution failed.
2025-03-20 00:55:21.462 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 00:55:21.463 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 00:55:21.480 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:55:21.493 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:55:21.508 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 00:55:21.556 +05:00 [INF] Начало выполнения команды для Domain=te_ekb, Count=5
2025-03-20 00:55:21.561 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:55:21.562 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:55:22.030 +05:00 [INF] Received HTTP response headers after 465.401ms - 200
2025-03-20 00:55:22.038 +05:00 [INF] End processing HTTP request after 477.9543ms - 200
2025-03-20 00:55:22.049 +05:00 [INF] Начало подсчета букв...
2025-03-20 00:55:22.049 +05:00 [INF] Подсчет завершился успешно. Было обработано 937 букв.
2025-03-20 00:55:22.050 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 00:55:23.016 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1503.2696ms.
2025-03-20 00:55:23.024 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 00:55:23.039 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1541.8456ms
2025-03-20 00:55:23.041 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 00:55:23.057 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null application/json; charset=utf-8 1614.3487ms
2025-03-20 00:55:29.464 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - null null
2025-03-20 00:55:29.470 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:55:29.475 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 00:55:29.477 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 00:55:29.479 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:55:29.480 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 00:55:29.588 +05:00 [INF] Received HTTP response headers after 107.5089ms - 200
2025-03-20 00:55:29.589 +05:00 [INF] End processing HTTP request after 110.2244ms - 200
2025-03-20 00:55:29.627 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 148.8576ms.
2025-03-20 00:55:29.630 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 00:55:29.631 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 154.9915ms
2025-03-20 00:55:29.632 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 00:55:29.633 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=te_ekb&count=5 - 200 null text/plain; charset=utf-8 169.722ms
2025-03-20 01:03:32.159 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null 0
2025-03-20 01:03:32.169 +05:00 [INF] CORS policy execution failed.
2025-03-20 01:03:32.172 +05:00 [INF] Request origin http://localhost:5143 does not have permission to access the resource.
2025-03-20 01:03:32.173 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:03:32.175 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:03:32.178 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 01:03:32.182 +05:00 [INF] Начало выполнения команды для Domain=antropogenez_ru, Count=5
2025-03-20 01:03:32.183 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:03:32.183 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:03:32.493 +05:00 [INF] Received HTTP response headers after 308.7991ms - 200
2025-03-20 01:03:32.494 +05:00 [INF] End processing HTTP request after 311.2405ms - 200
2025-03-20 01:03:32.598 +05:00 [INF] Начало подсчета букв...
2025-03-20 01:03:32.600 +05:00 [INF] Подсчет завершился успешно. Было обработано 8783 букв.
2025-03-20 01:03:32.600 +05:00 [INF] Подсчет успешно завершён.
2025-03-20 01:03:32.685 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 506.8057ms.
2025-03-20 01:03:32.686 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 01:03:32.687 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 510.4073ms
2025-03-20 01:03:32.687 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:03:32.688 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null application/json; charset=utf-8 529.5778ms
2025-03-20 01:04:20.449 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null null
2025-03-20 01:04:20.453 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:04:20.454 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:04:20.455 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 01:04:20.457 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:04:20.458 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:04:20.603 +05:00 [INF] Received HTTP response headers after 144.0324ms - 200
2025-03-20 01:04:20.605 +05:00 [INF] End processing HTTP request after 148.2482ms - 200
2025-03-20 01:04:20.709 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 252.8295ms.
2025-03-20 01:04:20.710 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 01:04:20.711 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 256.3314ms
2025-03-20 01:04:20.712 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:04:20.713 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null text/plain; charset=utf-8 263.7948ms
2025-03-20 01:10:31.663 +05:00 [INF] Application is shutting down...
2025-03-20 01:10:38.143 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 01:10:38.181 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 01:10:38.182 +05:00 [INF] Hosting environment: Development
2025-03-20 01:10:38.182 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 01:10:42.827 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null null
2025-03-20 01:10:42.846 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 01:10:42.860 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:10:42.872 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:10:42.888 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 01:10:42.900 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:10:42.901 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:10:43.379 +05:00 [INF] Received HTTP response headers after 475.2482ms - 200
2025-03-20 01:10:43.390 +05:00 [INF] End processing HTTP request after 491.9707ms - 200
2025-03-20 01:10:43.479 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 582.6121ms.
2025-03-20 01:10:43.488 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 01:10:43.497 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 618.3568ms
2025-03-20 01:10:43.499 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:10:43.506 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null text/plain; charset=utf-8 680.8652ms
2025-03-20 01:10:46.321 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null null
2025-03-20 01:10:46.325 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:10:46.326 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:10:46.328 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 01:10:46.329 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:10:46.330 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:10:46.481 +05:00 [INF] Received HTTP response headers after 151.1235ms - 200
2025-03-20 01:10:46.482 +05:00 [INF] End processing HTTP request after 153.5288ms - 200
2025-03-20 01:10:46.585 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 256.4845ms.
2025-03-20 01:10:46.587 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 01:10:46.589 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 261.4199ms
2025-03-20 01:10:46.590 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:10:46.590 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null text/plain; charset=utf-8 270.5383ms
2025-03-20 01:11:20.146 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null null
2025-03-20 01:11:20.149 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:11:20.150 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:11:20.152 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 01:11:20.154 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:11:20.154 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:11:20.348 +05:00 [INF] Received HTTP response headers after 193.1525ms - 200
2025-03-20 01:11:20.349 +05:00 [INF] End processing HTTP request after 195.9197ms - 200
2025-03-20 01:11:20.452 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 298.3096ms.
2025-03-20 01:11:20.453 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 01:11:20.454 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 302.6536ms
2025-03-20 01:11:20.455 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 01:11:20.456 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null text/plain; charset=utf-8 310.2614ms
2025-03-20 01:11:23.284 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 01:11:23.287 +05:00 [INF] CORS policy execution successful.
2025-03-20 01:11:23.288 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:11:23.292 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:11:23.294 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 01:11:23.335 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 01:11:23.335 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:11:23.336 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:11:23.514 +05:00 [INF] Received HTTP response headers after 177.7638ms - 200
2025-03-20 01:11:23.515 +05:00 [INF] End processing HTTP request after 179.6352ms - 200
2025-03-20 01:11:23.621 +05:00 [INF] Начало подсчета букв...
2025-03-20 01:11:23.622 +05:00 [INF] Подсчет завершился успешно. Было обработано 9854 букв.
2025-03-20 01:11:24.592 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1298.126ms.
2025-03-20 01:11:24.594 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 01:11:24.605 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1311.689ms
2025-03-20 01:11:24.606 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:11:24.614 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null application/json; charset=utf-8 1330.0719ms
2025-03-20 01:38:24.916 +05:00 [INF] Application is shutting down...
2025-03-20 01:38:31.119 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 01:38:31.162 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 01:38:31.163 +05:00 [INF] Hosting environment: Development
2025-03-20 01:38:31.163 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 01:38:36.002 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 01:38:36.257 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 256.4965ms
2025-03-20 01:38:36.411 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui.css - null null
2025-03-20 01:38:36.421 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.css - null null
2025-03-20 01:38:36.421 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-bundle.js - null null
2025-03-20 01:38:36.421 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-standalone-preset.js - null null
2025-03-20 01:38:36.422 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 01:38:36.483 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 61.3983ms
2025-03-20 01:38:36.489 +05:00 [INF] The file /index.css was not modified
2025-03-20 01:38:36.489 +05:00 [INF] The file /swagger-ui-bundle.js was not modified
2025-03-20 01:38:36.489 +05:00 [INF] The file /swagger-ui.css was not modified
2025-03-20 01:38:36.489 +05:00 [INF] The file /swagger-ui-standalone-preset.js was not modified
2025-03-20 01:38:36.490 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.css - 304 null text/css 68.9413ms
2025-03-20 01:38:36.490 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-bundle.js - 304 null text/javascript 69.3187ms
2025-03-20 01:38:36.491 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui.css - 304 null text/css 79.9403ms
2025-03-20 01:38:36.492 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-standalone-preset.js - 304 null text/javascript 70.5805ms
2025-03-20 01:38:36.786 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/favicon-32x32.png - null null
2025-03-20 01:38:36.786 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 01:38:36.787 +05:00 [INF] The file /favicon-32x32.png was not modified
2025-03-20 01:38:36.789 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/favicon-32x32.png - 304 null image/png 3.1109ms
2025-03-20 01:38:36.929 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.2577ms
2025-03-20 01:38:50.582 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null 0
2025-03-20 01:38:50.586 +05:00 [INF] CORS policy execution successful.
2025-03-20 01:38:50.587 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 01:38:50.600 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:38:50.615 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:38:50.631 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 01:38:50.678 +05:00 [INF] Начало выполнения команды для Domain=antropogenez_ru, Count=5
2025-03-20 01:38:50.683 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:38:50.684 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:38:51.087 +05:00 [INF] Received HTTP response headers after 399.8368ms - 200
2025-03-20 01:38:51.089 +05:00 [INF] End processing HTTP request after 407.4303ms - 200
2025-03-20 01:38:51.189 +05:00 [INF] Начало подсчета букв...
2025-03-20 01:38:51.192 +05:00 [INF] Подсчет завершился успешно. Было обработано 8783 букв.
2025-03-20 01:38:52.107 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1471.0427ms.
2025-03-20 01:38:52.114 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 01:38:52.128 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1508.7324ms
2025-03-20 01:38:52.129 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:38:52.140 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null application/json; charset=utf-8 1557.9246ms
2025-03-20 01:39:26.496 +05:00 [INF] Application is shutting down...
2025-03-20 01:39:30.081 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 01:39:30.169 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 01:39:30.172 +05:00 [INF] Hosting environment: Development
2025-03-20 01:39:30.179 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 01:39:32.301 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null 0
2025-03-20 01:39:32.321 +05:00 [INF] CORS policy execution successful.
2025-03-20 01:39:32.322 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 01:39:32.339 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:39:32.355 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:39:32.376 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 01:39:32.429 +05:00 [INF] Начало выполнения команды для Domain=antropogenez_ru, Count=5
2025-03-20 01:39:32.434 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:39:32.435 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:39:32.782 +05:00 [INF] Received HTTP response headers after 343.8606ms - 200
2025-03-20 01:39:32.789 +05:00 [INF] End processing HTTP request after 356.9303ms - 200
2025-03-20 01:39:32.879 +05:00 [INF] Начало подсчета букв...
2025-03-20 01:39:32.880 +05:00 [INF] Подсчет завершился успешно. Было обработано 8783 букв.
2025-03-20 01:39:33.836 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1453.9422ms.
2025-03-20 01:39:33.842 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 01:39:33.857 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1498.1341ms
2025-03-20 01:39:33.859 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:39:33.876 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null application/json; charset=utf-8 1575.8749ms
2025-03-20 01:39:54.963 +05:00 [INF] Application is shutting down...
2025-03-20 01:39:58.378 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 01:39:58.467 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 01:39:58.478 +05:00 [INF] Hosting environment: Development
2025-03-20 01:39:58.484 +05:00 [INF] Content root path: C:\Users\Kotian\RiderProjects\testudv\testudv.API
2025-03-20 01:40:01.078 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - null 0
2025-03-20 01:40:01.095 +05:00 [INF] CORS policy execution successful.
2025-03-20 01:40:01.096 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 01:40:01.113 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:40:01.126 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 01:40:01.142 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 01:40:01.195 +05:00 [INF] Начало выполнения команды для Domain=antropogenez_ru, Count=5
2025-03-20 01:40:01.203 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:40:01.204 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 01:40:01.579 +05:00 [INF] Received HTTP response headers after 371.7885ms - 200
2025-03-20 01:40:01.587 +05:00 [INF] End processing HTTP request after 386.7169ms - 200
2025-03-20 01:40:01.677 +05:00 [INF] Начало подсчета букв...
2025-03-20 01:40:01.678 +05:00 [INF] Подсчет завершился успешно. Было обработано 8783 букв.
2025-03-20 01:40:02.627 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1478.6081ms.
2025-03-20 01:40:02.635 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 01:40:02.650 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1520.0598ms
2025-03-20 01:40:02.652 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 01:40:02.664 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=antropogenez_ru&count=5 - 200 null application/json; charset=utf-8 1587.8781ms
2025-03-20 02:01:06.617 +05:00 [INF] Application is shutting down...
2025-03-20 15:32:21.194 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 15:32:21.246 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 15:32:21.247 +05:00 [INF] Hosting environment: Development
2025-03-20 15:32:21.248 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 15:32:28.272 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 15:32:28.356 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 85.5323ms
2025-03-20 15:32:28.412 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui.css - null null
2025-03-20 15:32:28.416 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 15:32:28.417 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.css - null null
2025-03-20 15:32:28.417 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-bundle.js - null null
2025-03-20 15:32:28.417 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-standalone-preset.js - null null
2025-03-20 15:32:28.420 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 4.437ms
2025-03-20 15:32:28.425 +05:00 [INF] The file /swagger-ui-bundle.js was not modified
2025-03-20 15:32:28.425 +05:00 [INF] The file /swagger-ui-standalone-preset.js was not modified
2025-03-20 15:32:28.425 +05:00 [INF] The file /swagger-ui.css was not modified
2025-03-20 15:32:28.425 +05:00 [INF] The file /index.css was not modified
2025-03-20 15:32:28.427 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-bundle.js - 304 null text/javascript 9.8085ms
2025-03-20 15:32:28.428 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui-standalone-preset.js - 304 null text/javascript 10.4199ms
2025-03-20 15:32:28.429 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/swagger-ui.css - 304 null text/css 17.5999ms
2025-03-20 15:32:28.429 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.css - 304 null text/css 12.5931ms
2025-03-20 15:32:28.768 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 15:32:28.771 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/favicon-32x32.png - null null
2025-03-20 15:32:28.773 +05:00 [INF] The file /favicon-32x32.png was not modified
2025-03-20 15:32:28.774 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/favicon-32x32.png - 304 null image/png 2.3651ms
2025-03-20 15:32:28.842 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.2717ms
2025-03-20 15:32:39.375 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=iot_third_urfu&count=5 - null null
2025-03-20 15:32:39.382 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 15:32:39.400 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 15:32:39.422 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 15:32:39.441 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 15:32:39.462 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 15:32:39.463 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 15:32:39.857 +05:00 [INF] Received HTTP response headers after 389.4955ms - 200
2025-03-20 15:32:39.859 +05:00 [INF] End processing HTTP request after 399.0584ms - 200
2025-03-20 15:32:39.883 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 436.8563ms.
2025-03-20 15:32:39.893 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 15:32:39.899 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 472.8338ms
2025-03-20 15:32:39.901 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 15:32:39.905 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=iot_third_urfu&count=5 - 200 null text/plain; charset=utf-8 530.3297ms
2025-03-20 15:55:39.791 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 15:55:39.795 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 3.8057ms
2025-03-20 15:55:39.918 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 15:55:39.920 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 2.2049ms
2025-03-20 15:55:40.077 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 15:55:40.082 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5.1578ms
2025-03-20 15:58:06.220 +05:00 [INF] Application is shutting down...
2025-03-20 16:43:36.406 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 16:43:36.444 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 16:43:36.445 +05:00 [INF] Hosting environment: Development
2025-03-20 16:43:36.446 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 16:43:38.538 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-03-20 16:43:38.560 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 16:43:38.581 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 43.6014ms
2025-03-20 16:43:38.613 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-03-20 16:43:41.197 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 16:43:41.258 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 61.4927ms
2025-03-20 16:43:41.399 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 16:43:41.404 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 4.7995ms
2025-03-20 16:43:41.486 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 16:43:41.560 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.6217ms
2025-03-20 16:46:43.654 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - null 0
2025-03-20 16:46:43.657 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:46:43.661 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:46:43.679 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:46:43.695 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:46:43.786 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 103.9433ms
2025-03-20 16:46:43.788 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:46:43.789 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'testudv.Application.Services.IPostService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:46:43.819 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - 500 null text/plain; charset=utf-8 165.0946ms
2025-03-20 16:47:54.674 +05:00 [INF] Application is shutting down...
2025-03-20 16:50:31.100 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 16:50:31.139 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 16:50:31.139 +05:00 [INF] Hosting environment: Development
2025-03-20 16:50:31.140 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 16:50:38.008 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - null 0
2025-03-20 16:50:38.026 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:50:38.027 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 16:50:38.041 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:50:38.055 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:50:38.072 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:50:38.163 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 104.2454ms
2025-03-20 16:50:38.171 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:50:38.172 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'testudv.Application.Services.IPostService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:50:38.204 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - 500 null text/plain; charset=utf-8 197.0238ms
2025-03-20 16:52:34.930 +05:00 [INF] Application is shutting down...
2025-03-20 16:52:38.763 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 16:52:38.798 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 16:52:38.798 +05:00 [INF] Hosting environment: Development
2025-03-20 16:52:38.799 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 16:52:40.665 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - null 0
2025-03-20 16:52:40.682 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:52:40.684 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 16:52:40.697 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:52:40.712 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:52:40.728 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:52:40.808 +05:00 [INF] Начало выполнения команды для Domain=project__it, Count=5
2025-03-20 16:52:40.814 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:52:40.815 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:52:41.207 +05:00 [INF] Received HTTP response headers after 388.8853ms - 200
2025-03-20 16:52:41.219 +05:00 [INF] End processing HTTP request after 406.8821ms - 200
2025-03-20 16:52:41.230 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:52:41.231 +05:00 [INF] Подсчет завершился успешно. Было обработано 3472 букв.
2025-03-20 16:52:41.930 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 16:52:42.589 +05:00 [INF] Executed DbCommand (72ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:52:42.658 +05:00 [ERR] Failed executing DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:52:42.677 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:52:42.695 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1978.2465ms
2025-03-20 16:52:42.697 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:52:42.701 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:52:42.747 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - 500 null text/plain; charset=utf-8 2083.1644ms
2025-03-20 16:54:39.027 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - null 0
2025-03-20 16:54:39.029 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:54:39.030 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:54:39.031 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:54:39.033 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:54:39.043 +05:00 [INF] Начало выполнения команды для Domain=hotel_historian, Count=5
2025-03-20 16:54:39.043 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:54:39.044 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:54:39.294 +05:00 [INF] Received HTTP response headers after 249.4572ms - 200
2025-03-20 16:54:39.296 +05:00 [INF] End processing HTTP request after 252.646ms - 200
2025-03-20 16:54:39.330 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:54:39.330 +05:00 [INF] Подсчет завершился успешно. Было обработано 3765 букв.
2025-03-20 16:54:39.383 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:54:39.386 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:54:39.390 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:54:39.400 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 367.3547ms
2025-03-20 16:54:39.401 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:54:39.401 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:54:39.413 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - 500 null text/plain; charset=utf-8 386.988ms
2025-03-20 16:54:47.421 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - null 0
2025-03-20 16:54:47.428 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:54:47.430 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:54:47.431 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:54:47.432 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:54:47.435 +05:00 [INF] Начало выполнения команды для Domain=hotel_historian, Count=5
2025-03-20 16:54:47.436 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:54:47.437 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:54:47.690 +05:00 [INF] Received HTTP response headers after 252.4653ms - 200
2025-03-20 16:54:47.691 +05:00 [INF] End processing HTTP request after 254.883ms - 200
2025-03-20 16:54:47.725 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:54:47.726 +05:00 [INF] Подсчет завершился успешно. Было обработано 3765 букв.
2025-03-20 16:54:47.736 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:54:47.740 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:54:47.742 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:54:47.748 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 316.2613ms
2025-03-20 16:54:47.749 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:54:47.749 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:54:47.765 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - 500 null text/plain; charset=utf-8 344.3514ms
2025-03-20 16:55:46.899 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - null 0
2025-03-20 16:55:46.902 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:55:46.902 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:55:46.903 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:55:46.905 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:55:46.906 +05:00 [INF] Начало выполнения команды для Domain=hotel_historian, Count=5
2025-03-20 16:55:46.907 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:55:46.908 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:55:47.004 +05:00 [INF] Received HTTP response headers after 95.5444ms - 200
2025-03-20 16:55:47.006 +05:00 [INF] End processing HTTP request after 98.8503ms - 200
2025-03-20 16:55:47.040 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:55:47.041 +05:00 [INF] Подсчет завершился успешно. Было обработано 3765 букв.
2025-03-20 16:55:47.043 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:55:47.045 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:55:47.047 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:55:47.054 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 149.0563ms
2025-03-20 16:55:47.055 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:55:47.056 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:55:47.067 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=hotel_historian&count=5 - 500 null text/plain; charset=utf-8 168.0404ms
2025-03-20 16:57:22.403 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - null 0
2025-03-20 16:57:22.404 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:57:22.405 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:57:22.406 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:57:22.407 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:57:22.409 +05:00 [INF] Начало выполнения команды для Domain=project__it, Count=5
2025-03-20 16:57:22.410 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:57:22.411 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:57:22.664 +05:00 [INF] Received HTTP response headers after 252.2588ms - 200
2025-03-20 16:57:22.665 +05:00 [INF] End processing HTTP request after 255.6602ms - 200
2025-03-20 16:57:22.699 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:57:22.699 +05:00 [INF] Подсчет завершился успешно. Было обработано 3472 букв.
2025-03-20 16:57:22.702 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:57:22.705 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:57:22.707 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:57:22.716 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 309.2036ms
2025-03-20 16:57:22.717 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:57:22.717 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:57:22.726 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - 500 null text/plain; charset=utf-8 323.6746ms
2025-03-20 16:57:25.294 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=6 - null 0
2025-03-20 16:57:25.298 +05:00 [INF] CORS policy execution successful.
2025-03-20 16:57:25.298 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:57:25.299 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:57:25.301 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 16:57:25.302 +05:00 [INF] Начало выполнения команды для Domain=project__it, Count=6
2025-03-20 16:57:25.303 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:57:25.304 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:57:25.398 +05:00 [INF] Received HTTP response headers after 93.9106ms - 200
2025-03-20 16:57:25.399 +05:00 [INF] End processing HTTP request after 95.8392ms - 200
2025-03-20 16:57:25.470 +05:00 [INF] Начало подсчета букв...
2025-03-20 16:57:25.471 +05:00 [INF] Подсчет завершился успешно. Было обработано 4976 букв.
2025-03-20 16:57:25.474 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 16:57:25.479 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 16:57:25.481 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 16:57:25.489 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 187.7101ms
2025-03-20 16:57:25.489 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 16:57:25.490 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 16:57:25.500 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=6 - 500 null text/plain; charset=utf-8 205.5467ms
2025-03-20 16:58:07.516 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=project__it&count=6 - null null
2025-03-20 16:58:07.521 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 16:58:07.528 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 16:58:07.529 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 16:58:07.532 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:58:07.532 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 16:58:07.651 +05:00 [INF] Received HTTP response headers after 118.0863ms - 200
2025-03-20 16:58:07.652 +05:00 [INF] End processing HTTP request after 120.1355ms - 200
2025-03-20 16:58:07.727 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 191.5496ms.
2025-03-20 16:58:07.738 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 16:58:07.740 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 211.1818ms
2025-03-20 16:58:07.741 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 16:58:07.741 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=project__it&count=6 - 200 null text/plain; charset=utf-8 225.3159ms
2025-03-20 16:58:07.963 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/favicon.ico - null null
2025-03-20 16:58:07.966 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/favicon.ico - 404 0 null 3.1698ms
2025-03-20 16:58:07.968 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/favicon.ico, Response status code: 404
2025-03-20 17:00:56.960 +05:00 [INF] Application is shutting down...
2025-03-20 17:01:30.738 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:01:30.774 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:01:30.775 +05:00 [INF] Hosting environment: Development
2025-03-20 17:01:30.776 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:01:37.051 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=6 - null 0
2025-03-20 17:01:37.071 +05:00 [INF] CORS policy execution successful.
2025-03-20 17:01:37.073 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 17:01:37.090 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:01:37.105 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:01:37.126 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 17:01:37.206 +05:00 [INF] Начало выполнения команды для Domain=project__it, Count=6
2025-03-20 17:01:37.212 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:01:37.213 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:01:37.565 +05:00 [INF] Received HTTP response headers after 349.0946ms - 200
2025-03-20 17:01:37.572 +05:00 [INF] End processing HTTP request after 362.8628ms - 200
2025-03-20 17:01:37.622 +05:00 [INF] Начало подсчета букв...
2025-03-20 17:01:37.624 +05:00 [INF] Подсчет завершился успешно. Было обработано 4976 букв.
2025-03-20 17:01:37.996 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:01:38.491 +05:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 17:01:38.556 +05:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 17:01:38.573 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 17:01:38.589 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1479.7766ms
2025-03-20 17:01:38.590 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:01:38.593 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 17:01:38.636 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=6 - 500 null text/plain; charset=utf-8 1588.3606ms
2025-03-20 17:10:01.163 +05:00 [INF] Application is shutting down...
2025-03-20 17:10:04.604 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:10:04.641 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:10:04.641 +05:00 [INF] Hosting environment: Development
2025-03-20 17:10:04.642 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:10:09.002 +05:00 [INF] Application is shutting down...
2025-03-20 17:12:38.335 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:12:38.374 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:12:38.375 +05:00 [INF] Hosting environment: Development
2025-03-20 17:12:38.375 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:16:03.991 +05:00 [INF] Application is shutting down...
2025-03-20 17:16:07.482 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:16:07.520 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:16:07.520 +05:00 [INF] Hosting environment: Development
2025-03-20 17:16:07.521 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:19:30.350 +05:00 [INF] Application is shutting down...
2025-03-20 17:20:03.133 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:21:16.866 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:21:17.132 +05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:21:17.150 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 17:21:17.235 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 17:21:17.262 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:21:17.293 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:21:17.294 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 17:21:17.300 +05:00 [INF] Applying migration '20250320122003_updatePost'.
2025-03-20 17:21:17.309 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320122003_updatePost', '9.0.0');
2025-03-20 17:21:25.032 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:21:25.072 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:21:25.073 +05:00 [INF] Hosting environment: Development
2025-03-20 17:21:25.074 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:21:27.886 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 17:21:27.960 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 74.8057ms
2025-03-20 17:21:28.010 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 17:21:28.014 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 4.8236ms
2025-03-20 17:21:28.349 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 17:21:28.419 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2215ms
2025-03-20 17:21:44.242 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=ea_like_me&count=5 - null null
2025-03-20 17:21:44.246 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 17:21:44.260 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 17:21:44.273 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:21:44.289 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 17:21:44.303 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:21:44.304 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:21:44.605 +05:00 [INF] Received HTTP response headers after 297.0864ms - 200
2025-03-20 17:21:44.606 +05:00 [INF] End processing HTTP request after 305.4303ms - 200
2025-03-20 17:21:44.618 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 341.5789ms
2025-03-20 17:21:44.620 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 17:21:44.623 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Неверная структура JSON
   at testudv.Application.Services.PostService.GetPostsAsync(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.Application\Services\PostService.cs:line 46
   at testudv.Application.Handlers.GetPostsHandler.Handle(GetPostsCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\GetPostsHandler.cs:line 20
   at testudv.API.Controllers.PostsController.GetPosts(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 17:21:44.655 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=ea_like_me&count=5 - 500 null text/plain; charset=utf-8 412.9917ms
2025-03-20 17:22:15.540 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null null
2025-03-20 17:22:15.543 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 17:22:15.544 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:22:15.546 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 17:22:15.547 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:22:15.548 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:22:15.740 +05:00 [INF] Received HTTP response headers after 190.2753ms - 200
2025-03-20 17:22:15.741 +05:00 [INF] End processing HTTP request after 193.6655ms - 200
2025-03-20 17:22:15.858 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 306.8287ms.
2025-03-20 17:22:15.865 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 17:22:15.866 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 321.0718ms
2025-03-20 17:22:15.867 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 17:22:15.867 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null text/plain; charset=utf-8 327.9165ms
2025-03-20 17:22:21.211 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 17:22:21.214 +05:00 [INF] CORS policy execution successful.
2025-03-20 17:22:21.215 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:22:21.219 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:22:21.221 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 17:22:21.288 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 17:22:21.289 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:22:21.290 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:22:21.508 +05:00 [INF] Received HTTP response headers after 217.6019ms - 200
2025-03-20 17:22:21.509 +05:00 [INF] End processing HTTP request after 219.7933ms - 200
2025-03-20 17:22:21.618 +05:00 [INF] Начало подсчета букв...
2025-03-20 17:22:21.620 +05:00 [INF] Подсчет завершился успешно. Было обработано 4190 букв.
2025-03-20 17:22:21.985 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:22:22.512 +05:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 17:22:22.582 +05:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 17:22:22.593 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 17:22:22.600 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1379.2677ms
2025-03-20 17:22:22.600 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:22:22.601 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 17:22:22.628 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 1417.2679ms
2025-03-20 17:25:10.472 +05:00 [INF] Application is shutting down...
2025-03-20 17:27:22.038 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:27:31.157 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:27:31.386 +05:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:27:31.400 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 17:27:31.482 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 17:27:31.513 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:27:31.550 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:27:31.552 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 17:27:31.559 +05:00 [INF] Applying migration '20250320122722_fixPK'.
2025-03-20 17:27:31.566 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320122722_fixPK', '9.0.0');
2025-03-20 17:27:37.544 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:27:37.578 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:27:37.580 +05:00 [INF] Hosting environment: Development
2025-03-20 17:27:37.580 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:27:39.226 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 17:27:39.243 +05:00 [INF] CORS policy execution successful.
2025-03-20 17:27:39.245 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 17:27:39.260 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:27:39.275 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:27:39.293 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 17:27:39.375 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 17:27:39.380 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:27:39.382 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:27:39.842 +05:00 [INF] Received HTTP response headers after 457.6085ms - 200
2025-03-20 17:27:39.850 +05:00 [INF] End processing HTTP request after 472.0177ms - 200
2025-03-20 17:27:39.942 +05:00 [INF] Начало подсчета букв...
2025-03-20 17:27:39.944 +05:00 [INF] Подсчет завершился успешно. Было обработано 4190 букв.
2025-03-20 17:27:40.295 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:27:40.792 +05:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 17:27:40.858 +05:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 17:27:40.876 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 17:27:40.894 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1614.317ms
2025-03-20 17:27:40.895 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:27:40.899 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 17:27:40.945 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 1720.5109ms
2025-03-20 17:32:06.452 +05:00 [INF] Application is shutting down...
2025-03-20 17:36:59.186 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:37:08.384 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:37:08.775 +05:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:37:08.862 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 17:37:08.890 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:37:08.938 +05:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-20 17:37:08.982 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 17:37:08.986 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 17:37:08.994 +05:00 [INF] Applying migration '20250319160742_init'.
2025-03-20 17:37:09.002 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Posts" (
    "PostId" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "LettersCount" jsonb NOT NULL,
    CONSTRAINT "PK_Posts" PRIMARY KEY ("PostId")
);
2025-03-20 17:37:09.003 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250319160742_init', '9.0.0');
2025-03-20 17:37:09.005 +05:00 [INF] Applying migration '20250319190711_updatePostInfo'.
2025-03-20 17:37:09.011 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Posts";
2025-03-20 17:37:09.015 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PostsInfo" (
    "PostId" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "Count" integer NOT NULL,
    "LettersCount" jsonb NOT NULL,
    CONSTRAINT "PK_PostsInfo" PRIMARY KEY ("PostId")
);
2025-03-20 17:37:09.017 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250319190711_updatePostInfo', '9.0.0');
2025-03-20 17:37:09.020 +05:00 [INF] Applying migration '20250320122003_updatePost'.
2025-03-20 17:37:09.022 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320122003_updatePost', '9.0.0');
2025-03-20 17:37:09.024 +05:00 [INF] Applying migration '20250320122722_fixPK'.
2025-03-20 17:37:09.026 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320122722_fixPK', '9.0.0');
2025-03-20 17:37:09.027 +05:00 [INF] Applying migration '20250320123659_fixkey'.
2025-03-20 17:37:09.028 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320123659_fixkey', '9.0.0');
2025-03-20 17:37:29.211 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 17:37:29.249 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 17:37:29.250 +05:00 [INF] Hosting environment: Development
2025-03-20 17:37:29.251 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 17:37:34.814 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 17:37:34.832 +05:00 [INF] CORS policy execution successful.
2025-03-20 17:37:34.833 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 17:37:34.847 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:37:34.862 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 17:37:34.879 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 17:37:34.957 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 17:37:34.963 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:37:34.964 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 17:37:35.390 +05:00 [INF] Received HTTP response headers after 422.2761ms - 200
2025-03-20 17:37:35.397 +05:00 [INF] End processing HTTP request after 436.1728ms - 200
2025-03-20 17:37:35.481 +05:00 [INF] Начало подсчета букв...
2025-03-20 17:37:35.482 +05:00 [INF] Подсчет завершился успешно. Было обработано 4190 букв.
2025-03-20 17:37:35.855 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 17:37:36.398 +05:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "PostId";
2025-03-20 17:37:36.462 +05:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("PostId", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 17:37:36.477 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 17:37:36.494 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1627.8289ms
2025-03-20 17:37:36.496 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 17:37:36.499 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 17:37:36.547 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 1735.0934ms
2025-03-20 18:06:26.267 +05:00 [INF] Application is shutting down...
2025-03-20 18:08:49.042 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:08:55.854 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:08:56.098 +05:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:08:56.194 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 18:08:56.232 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:08:56.304 +05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-20 18:08:56.343 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:08:56.347 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 18:08:56.356 +05:00 [INF] Applying migration '20250320130849_init'.
2025-03-20 18:08:56.363 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PostsInfo" (
    "Domain" text NOT NULL,
    "Count" integer NOT NULL,
    "LettersCount" jsonb NOT NULL
);
2025-03-20 18:08:56.367 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320130849_init', '9.0.0');
2025-03-20 18:09:01.064 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:09:01.106 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:09:01.106 +05:00 [INF] Hosting environment: Development
2025-03-20 18:09:01.107 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:09:12.767 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null null
2025-03-20 18:09:12.788 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:09:12.802 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 18:09:12.815 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:09:12.839 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 18:09:12.855 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:09:12.857 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:09:13.491 +05:00 [INF] Received HTTP response headers after 630.9569ms - 200
2025-03-20 18:09:13.499 +05:00 [INF] End processing HTTP request after 647.858ms - 200
2025-03-20 18:09:13.601 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 754.9662ms.
2025-03-20 18:09:13.613 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 18:09:13.620 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 800.0268ms
2025-03-20 18:09:13.622 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 18:09:13.626 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null text/plain; charset=utf-8 861.2283ms
2025-03-20 18:09:17.014 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:09:17.018 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:09:17.020 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:09:17.024 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:09:17.026 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:09:17.098 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:09:17.098 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:09:17.099 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:09:17.303 +05:00 [INF] Received HTTP response headers after 203.5852ms - 200
2025-03-20 18:09:17.305 +05:00 [INF] End processing HTTP request after 207.0773ms - 200
2025-03-20 18:09:17.411 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:09:17.412 +05:00 [INF] Подсчет завершился успешно. Было обработано 4190 букв.
2025-03-20 18:09:17.752 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:09:17.837 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 812.2066ms
2025-03-20 18:09:17.838 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:09:17.840 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to track an instance of type 'PostInfo' because it does not have a primary key. Only entity types with a primary key may be tracked.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetOrCreateEntry(Object entity, IEntityType entityType)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 19
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 51
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:09:17.882 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 867.9743ms
2025-03-20 18:14:49.335 +05:00 [INF] Application is shutting down...
2025-03-20 18:15:20.455 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:15:39.826 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:15:46.293 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:15:46.734 +05:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:15:46.812 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-03-20 18:15:46.841 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:15:46.888 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-20 18:15:46.921 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-20 18:15:46.924 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-20 18:15:46.932 +05:00 [INF] Applying migration '20250320131540_init'.
2025-03-20 18:15:46.940 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PostsInfo" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "Count" integer NOT NULL,
    "LettersCount" jsonb NOT NULL,
    CONSTRAINT "PK_PostsInfo" PRIMARY KEY ("Id")
);
2025-03-20 18:15:46.943 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250320131540_init', '9.0.0');
2025-03-20 18:16:16.830 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:16:16.868 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:16:16.869 +05:00 [INF] Hosting environment: Development
2025-03-20 18:16:16.869 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:16:29.227 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:16:29.244 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:16:29.245 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:16:29.258 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:16:29.270 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:16:29.286 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:16:29.364 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:16:29.370 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:16:29.371 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:16:29.790 +05:00 [INF] Received HTTP response headers after 416.4702ms - 200
2025-03-20 18:16:29.797 +05:00 [INF] End processing HTTP request after 429.9462ms - 200
2025-03-20 18:16:29.863 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:16:29.864 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:16:30.247 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:16:30.780 +05:00 [INF] Executed DbCommand (67ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:16:30.840 +05:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Id", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 18:16:30.856 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 18:16:30.873 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1598.2874ms
2025-03-20 18:16:30.874 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:16:30.877 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:16:30.925 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 1699.5731ms
2025-03-20 18:19:12.151 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:19:12.154 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:19:12.155 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:19:12.157 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:19:12.160 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:19:12.169 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:19:12.170 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:19:12.170 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:19:12.552 +05:00 [INF] Received HTTP response headers after 381.5709ms - 200
2025-03-20 18:19:12.554 +05:00 [INF] End processing HTTP request after 384.2215ms - 200
2025-03-20 18:19:12.631 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:19:12.633 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:19:12.686 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:19:12.691 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Id", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 18:19:12.695 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 18:19:12.702 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 543.2879ms
2025-03-20 18:19:12.703 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:19:12.704 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:19:12.715 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 565.8335ms
2025-03-20 18:19:25.812 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:19:25.816 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:19:25.817 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:19:25.818 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:19:25.819 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:19:25.822 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:19:25.824 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:19:25.825 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:19:26.016 +05:00 [INF] Received HTTP response headers after 189.7323ms - 200
2025-03-20 18:19:26.018 +05:00 [INF] End processing HTTP request after 193.7956ms - 200
2025-03-20 18:19:26.097 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:19:26.099 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:19:26.112 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:19:26.115 +05:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Id", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 18:19:26.117 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 18:19:26.125 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 306.6364ms
2025-03-20 18:19:26.126 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:19:26.127 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:19:26.143 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 331.5607ms
2025-03-20 18:20:00.631 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:20:00.639 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:20:00.640 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:20:00.642 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:20:00.645 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:20:00.646 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:20:00.647 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:20:00.647 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:20:00.843 +05:00 [INF] Received HTTP response headers after 194.7474ms - 200
2025-03-20 18:20:00.846 +05:00 [INF] End processing HTTP request after 198.9164ms - 200
2025-03-20 18:20:00.919 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:20:00.920 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:20:00.923 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:20:00.929 +05:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Id", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 18:20:00.933 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 18:20:00.949 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 304.8669ms
2025-03-20 18:20:00.951 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:20:00.952 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:20:00.960 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 329.3769ms
2025-03-20 18:21:59.132 +05:00 [INF] Application is shutting down...
2025-03-20 18:22:03.121 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:22:03.166 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:22:03.167 +05:00 [INF] Hosting environment: Development
2025-03-20 18:22:03.167 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:22:05.516 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:22:05.535 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:22:05.536 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:22:05.550 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:22:05.565 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:22:05.584 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:22:05.668 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:22:05.673 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:22:05.674 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:22:06.118 +05:00 [INF] Received HTTP response headers after 440.4801ms - 200
2025-03-20 18:22:06.125 +05:00 [INF] End processing HTTP request after 454.8114ms - 200
2025-03-20 18:22:06.176 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:22:06.177 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:22:06.536 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:22:07.060 +05:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:22:07.135 +05:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Id", "Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2, @p3);
2025-03-20 18:22:07.152 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'testudv.Infrastructure.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-20 18:22:07.169 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1599.9738ms
2025-03-20 18:22:07.171 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:22:07.176 +05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23505
    MessageText: повторяющееся значение ключа нарушает ограничение уникальности "PK_PostsInfo"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: PostsInfo
    ConstraintName: PK_PostsInfo
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at testudv.Infrastructure.Repositories.PostInfoRepository.SaveAnalysisAsync(PostInfo postInfo) in C:\Users\Kotian\testudv\testudv.Infrastructure\Repositories\PostInfoRepository.cs:line 20
   at testudv.Application.Handlers.CreatePostInfoHandler.Handle(CreatePostInfoCommand request, CancellationToken cancellationToken) in C:\Users\Kotian\testudv\testudv.Application\Handlers\CreatePostInfoHandler.cs:line 55
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:22:07.269 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 1755.25ms
2025-03-20 18:24:40.293 +05:00 [INF] Application is shutting down...
2025-03-20 18:24:44.672 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:24:44.713 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:24:44.713 +05:00 [INF] Hosting environment: Development
2025-03-20 18:24:44.714 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:24:48.347 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:24:48.366 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:24:48.368 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:24:48.386 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:24:48.400 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:24:48.417 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:24:48.497 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:24:48.503 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:24:48.504 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:24:49.224 +05:00 [INF] Received HTTP response headers after 717.381ms - 200
2025-03-20 18:24:49.233 +05:00 [INF] End processing HTTP request after 731.9814ms - 200
2025-03-20 18:24:49.290 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:24:49.291 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:24:49.665 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:24:50.230 +05:00 [INF] Executed DbCommand (79ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:24:50.289 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1867.85ms.
2025-03-20 18:24:50.296 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 18:24:50.392 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1987.7165ms
2025-03-20 18:24:50.394 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:24:50.406 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null application/json; charset=utf-8 2060.4771ms
2025-03-20 18:25:08.556 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null null
2025-03-20 18:25:08.562 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 18:25:08.565 +05:00 [INF] Route matched with {action = "GetPosts", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPosts(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:25:08.567 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.GetPosts (testudv.API) - Validation state: "Valid"
2025-03-20 18:25:08.570 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:25:08.571 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:25:08.792 +05:00 [INF] Received HTTP response headers after 220.4373ms - 200
2025-03-20 18:25:08.793 +05:00 [INF] End processing HTTP request after 223.1704ms - 200
2025-03-20 18:25:08.873 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.GetPosts (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 305.2862ms.
2025-03-20 18:25:08.875 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-20 18:25:08.877 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.GetPosts (testudv.API) in 310.5326ms
2025-03-20 18:25:08.877 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.GetPosts (testudv.API)'
2025-03-20 18:25:08.878 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null text/plain; charset=utf-8 323.0507ms
2025-03-20 18:25:56.739 +05:00 [INF] Application is shutting down...
2025-03-20 18:26:14.718 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:26:14.754 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:26:14.754 +05:00 [INF] Hosting environment: Development
2025-03-20 18:26:14.755 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:26:35.610 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:26:35.629 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:26:35.630 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:26:35.644 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:26:35.659 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:26:35.678 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:26:35.769 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 105.6393ms
2025-03-20 18:26:35.778 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:26:35.779 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'testudv.Application.Services.IPostService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:26:35.811 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 202.8348ms
2025-03-20 18:27:28.127 +05:00 [INF] Application is shutting down...
2025-03-20 18:27:32.166 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:27:32.202 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:27:32.202 +05:00 [INF] Hosting environment: Development
2025-03-20 18:27:32.203 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:27:34.280 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:27:34.299 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:27:34.300 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:27:34.315 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:27:34.330 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:27:34.347 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:27:34.430 +05:00 [INF] Начало выполнения команды для Domain=sea_like_me, Count=5
2025-03-20 18:27:34.435 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:27:34.436 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:27:34.902 +05:00 [INF] Received HTTP response headers after 461.3495ms - 200
2025-03-20 18:27:34.911 +05:00 [INF] End processing HTTP request after 477.7842ms - 200
2025-03-20 18:27:34.958 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:27:34.959 +05:00 [INF] Подсчет завершился успешно. Было обработано 4214 букв.
2025-03-20 18:27:35.358 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:27:35.855 +05:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:27:35.916 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1564.3927ms.
2025-03-20 18:27:35.923 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 18:27:35.943 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1607.0796ms
2025-03-20 18:27:35.944 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:27:35.957 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 200 null application/json; charset=utf-8 1679.9348ms
2025-03-20 18:28:58.907 +05:00 [INF] Application is shutting down...
2025-03-20 18:29:03.244 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:29:03.280 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:29:03.281 +05:00 [INF] Hosting environment: Development
2025-03-20 18:29:03.281 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:29:11.072 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - null 0
2025-03-20 18:29:11.091 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:29:11.092 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:29:11.107 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:29:11.121 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:29:11.140 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:29:11.236 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 111.2927ms
2025-03-20 18:29:11.244 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:29:11.246 +05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'testudv.Application.Services.IPostService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(IRequest`1 request, IServiceProvider serviceProvider, CancellationToken cancellationToken)
   at MediatR.Mediator.Send[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at testudv.API.Controllers.PostsController.AddPostLetters(String domain, Int32 count) in C:\Users\Kotian\testudv\testudv.API\Controllers\PostsController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-20 18:29:11.283 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=sea_like_me&count=5 - 500 null text/plain; charset=utf-8 212.271ms
2025-03-20 18:30:46.537 +05:00 [INF] Application is shutting down...
2025-03-20 18:31:24.399 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:31:24.436 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:31:24.436 +05:00 [INF] Hosting environment: Development
2025-03-20 18:31:24.437 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:32:43.876 +05:00 [INF] Application is shutting down...
2025-03-20 18:35:01.401 +05:00 [INF] Now listening on: http://localhost:5143
2025-03-20 18:35:01.440 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-20 18:35:01.441 +05:00 [INF] Hosting environment: Development
2025-03-20 18:35:01.442 +05:00 [INF] Content root path: C:\Users\Kotian\testudv\testudv.API
2025-03-20 18:35:07.017 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.html - null null
2025-03-20 18:35:07.093 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.html - 200 null text/html;charset=utf-8 77.5371ms
2025-03-20 18:35:07.294 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/index.js - null null
2025-03-20 18:35:07.299 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/index.js - 200 null application/javascript;charset=utf-8 5.4699ms
2025-03-20 18:35:07.575 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-03-20 18:35:07.644 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.8158ms
2025-03-20 18:35:17.473 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - null 0
2025-03-20 18:35:17.480 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:35:17.482 +05:00 [WRN] Failed to determine the https port for redirect.
2025-03-20 18:35:17.497 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:35:17.516 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:35:17.532 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:35:17.605 +05:00 [INF] Начало выполнения команды для Domain=project__it, Count=5
2025-03-20 18:35:17.610 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:35:17.612 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:35:17.936 +05:00 [INF] Received HTTP response headers after 320.9344ms - 200
2025-03-20 18:35:17.938 +05:00 [INF] End processing HTTP request after 329.6921ms - 200
2025-03-20 18:35:17.968 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:35:17.969 +05:00 [INF] Подсчет завершился успешно. Было обработано 3472 букв.
2025-03-20 18:35:18.373 +05:00 [WRN] The property 'PostInfo.LettersCount' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-03-20 18:35:18.976 +05:00 [INF] Executed DbCommand (117ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:35:19.047 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1510.8419ms.
2025-03-20 18:35:19.052 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 18:35:19.067 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 1547.0129ms
2025-03-20 18:35:19.068 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:35:19.084 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=project__it&count=5 - 200 null application/json; charset=utf-8 1610.9936ms
2025-03-20 18:39:55.363 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/Posts?domain=iot_third_urfu&count=5 - null 0
2025-03-20 18:39:55.368 +05:00 [INF] CORS policy execution successful.
2025-03-20 18:39:55.369 +05:00 [INF] Executing endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:39:55.371 +05:00 [INF] Route matched with {action = "AddPostLetters", controller = "Posts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPostLetters(System.String, Int32) on controller testudv.API.Controllers.PostsController (testudv.API).
2025-03-20 18:39:55.377 +05:00 [INF] Executing action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) - Validation state: "Valid"
2025-03-20 18:39:55.388 +05:00 [INF] Начало выполнения команды для Domain=iot_third_urfu, Count=5
2025-03-20 18:39:55.389 +05:00 [INF] Start processing HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:39:55.390 +05:00 [INF] Sending HTTP request GET https://api.vk.com/method/wall.get?*
2025-03-20 18:39:55.656 +05:00 [INF] Received HTTP response headers after 265.7375ms - 200
2025-03-20 18:39:55.658 +05:00 [INF] End processing HTTP request after 268.7926ms - 200
2025-03-20 18:39:55.692 +05:00 [INF] Начало подсчета букв...
2025-03-20 18:39:55.693 +05:00 [INF] Подсчет завершился успешно. Было обработано 3442 букв.
2025-03-20 18:39:55.777 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PostsInfo" ("Count", "Domain", "LettersCount")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-03-20 18:39:55.779 +05:00 [INF] Executed action method testudv.API.Controllers.PostsController.AddPostLetters (testudv.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 400.699ms.
2025-03-20 18:39:55.783 +05:00 [INF] Executing OkObjectResult, writing value of type 'testudv.Application.Dtos.PostInfoDto'.
2025-03-20 18:39:55.784 +05:00 [INF] Executed action testudv.API.Controllers.PostsController.AddPostLetters (testudv.API) in 410.2867ms
2025-03-20 18:39:55.785 +05:00 [INF] Executed endpoint 'testudv.API.Controllers.PostsController.AddPostLetters (testudv.API)'
2025-03-20 18:39:55.786 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/Posts?domain=iot_third_urfu&count=5 - 200 null application/json; charset=utf-8 423.1265ms
